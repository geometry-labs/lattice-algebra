
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://geometry-labs.github.io/lattice-algebra/intended_usage/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.11">
    
    
      
        <title>Intended Usage - lattice-algebra</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8c5ef100.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.9647289d.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#intended-usage-and-some-background" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="lattice-algebra" class="md-header__button md-logo" aria-label="lattice-algebra" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            lattice-algebra
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Intended Usage
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/geometry-labs/lattice-algebra" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    geometry-labs/lattice-algebra
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="lattice-algebra" class="md-nav__button md-logo" aria-label="lattice-algebra" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    lattice-algebra
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/geometry-labs/lattice-algebra" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    geometry-labs/lattice-algebra
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Index
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cryptography/" class="md-nav__link">
        Cryptography
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../under_the_hood/" class="md-nav__link">
        Under The Hood
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Intended Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Intended Usage
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arithmetic" class="md-nav__link">
    Arithmetic
  </a>
  
    <nav class="md-nav" aria-label="Arithmetic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-arithmetic" class="md-nav__link">
    Example of Arithmetic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#randomness-and-hashing" class="md-nav__link">
    Randomness and Hashing
  </a>
  
    <nav class="md-nav" aria-label="Randomness and Hashing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-randomness-and-hashing" class="md-nav__link">
    Example of Randomness and Hashing.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#arithmetic" class="md-nav__link">
    Arithmetic
  </a>
  
    <nav class="md-nav" aria-label="Arithmetic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-arithmetic" class="md-nav__link">
    Example of Arithmetic
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#randomness-and-hashing" class="md-nav__link">
    Randomness and Hashing
  </a>
  
    <nav class="md-nav" aria-label="Randomness and Hashing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-of-randomness-and-hashing" class="md-nav__link">
    Example of Randomness and Hashing.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="intended-usage-and-some-background">Intended Usage (and Some Background)<a class="headerlink" href="#intended-usage-and-some-background" title="Permanent link">&para;</a></h1>
<h2 id="arithmetic">Arithmetic<a class="headerlink" href="#arithmetic" title="Permanent link">&para;</a></h2>
<p>For some TLDR code snippets, proceed to the Example below.</p>
<p>In many lattice-based cryptographic schemes, primitives are constructed from polynomials in the ring <code>R = Zq[X]/(X^d + 1)</code> where we denote the integers modulo a prime <code>q</code> with <code>Zq</code>, with a degree<code>d</code> that is a power of two such that <code>(q-1) % (2*d) = 0</code>. Keys are often vectors from the vector space <code>V=R^l</code> or matrices with entries from <code>V = R^(k * l)</code> for dimensions <code>k</code>, <code>l</code>. For example, the CRYSTALS-Dilithium scheme sets <code>q = 2^23 - 2^13 + 1</code>, <code>d = 256</code>, and uses <code>4x4</code>, <code>6x5</code>, and <code>8x7</code> matrices, depending on security level.</p>
<p>We encode the vector space <code>V</code> using the <code>LatticeParameters</code> object which holds the <code>degree</code>, <code>modulus</code>, and <code>length</code> attributes. </p>
<p>We create polynomials in <code>R</code> by using the <code>Polynomial</code> object, which has a <code>LatticeParameters</code> attribute called <code>lp</code>. When we instantiate a Polynomial, we pass in the lattice parameters and a <em>coefficient representation</em> of that polynomial as a dictionary. The keys determine the power on the monomial and the value determines the coefficient. </p>
<p>For example, if <code>degree = 8</code> and <code>modulus = 257</code>, then the polynomial <code>f(X) = 1 + 256 * X + 12 * X**2</code> can be created with either <code>{0: 1, 1: 256, 2: 12}</code> or <code>{0: 1, 1: -1, 2: 12}</code> as the input coefficient representation, since <code>(256 - (-1)) % 257 == 0</code>. </p>
<p>We create polynomial vectors in <code>V</code> by using the <code>PolynomialVector</code> object, which has a <code>LatticeParameters</code> attribute and another attribute called <code>entries</code> which is just a list of <code>Polynomial</code> objects.</p>
<p>For example, if <code>f</code> and <code>g</code> are <code>Polynomial</code> and have the same lattice parameters, which has <code>l = 2</code>, then we can instantiate the vector <code>v = [f, g]</code> by passing in <code>entries=[f, g]</code>.</p>
<p>From a <code>Polynomial</code>, we can access the NTT representation at any time for almost no cost with the <code>ntt_representation</code> attribute. However, regaining the coefficient representation requires computing the inverse NTT, which is costly. Checking norms and weights of a <code>Polynomial</code> or a <code>PolynomialVector</code> requires the coefficient representation. We re-emphasize that this representation is costly to compute. Thus, it should only be computed once (and norms and weights should only be checked at the end of algorithms). We regain the coefficient representation of a <code>Polynomial</code> or a <code>PolynomialVector</code> object by calling the <code>get_coef_rep</code> function.</p>
<h3 id="example-of-arithmetic">Example of Arithmetic<a class="headerlink" href="#example-of-arithmetic" title="Permanent link">&para;</a></h3>
<p>Consider the vector space <code>V</code> defined with <code>degree = 8</code>, <code>modulus = 257</code>, and <code>length = 3</code>, and the following 8 polynomials (which are proportional to the first seven Legendre polynomials, for a convenient example).</p>
<ol>
<li><code>a(X) = 1</code></li>
<li><code>b(X) = X</code></li>
<li><code>c(X) = -1 + 3 * X**2</code></li>
<li><code>d(X) = -3 * X + 5 * X ** 3</code></li>
<li><code>e(X) = 3 - 30 * X ** 2 + 35 * X ** 4</code></li>
<li><code>f(X) = 15 * X - 70 * X ** 3  + 63 * X ** 5</code></li>
<li><code>g(X) = -5 + 105 * X ** 2 - 315 * X ** 4 + 231 * X ** 6</code></li>
<li><code>h(X) = -35 * X + 315 * X ** 3 - 693 * X ** 5 + 429 * X ** 7</code></li>
</ol>
<p>In the following code, we instantiate the vector space <code>V = R^3</code>, we instantiate these polynomials, we compute a few of their sums and products, we create two vectors of polynomials, <code>v = [a, b, c]</code> and <code>u = [d, e, f]</code>, we compute the dot product <code>v * u</code> of these two vectors, we compare it to the sums and products we just computed by calling the <code>get_coef_rep</code> function, we scale <code>v</code> by <code>g(X)</code> and we scale <code>u</code> by <code>h(X)</code>, we compute this linear combination of <code>v</code> and <code>u</code>, and we print the coefficient representation, norm, and weight.</p>
<div class="highlight"><pre><span></span><code>from lattice_algebra import LatticeParameters, Polynomial, PolynomialVector

lp = LatticeParameters(pars={&#39;degree&#39;: 8, &#39;modulus&#39;: 257, &#39;length&#39;: 3})  # make V

a = Polynomial(lp = lp, coefs = {0: 1})  # Make 8 polynomials proportional to the first 8 Legendre polys
b = Polynomial(lp = lp, coefs = {1: 1})
c = Polynomial(lp = lp, coefs = {0: -1, 2: 3})
d = Polynomial(lp = lp, coefs = {1: -3, 3: 5})
e = Polynomial(lp = lp, coefs = {0: 3, 2: -30, 4: 35})
f = Polynomial(lp = lp, coefs = {1: 15, 3: -70, 5: 63})
g = Polynomial(lp = lp, coefs = {0: -5, 2: 105, 4: -315, 6: 231})
h = Polynomial(lp = lp, coefs = {1: -35, 3: 315, 5: -693, 7: 429})

prods = [a * d, b * e, c * f]  # We can add, subtract, multiply, and use python built-in sum()
sum_of_these = sum(prods)
coef_rep_of_sum, n_sum, n_sum = sum_of_these.get_coef_rep()

v = PolynomialVector(lp = lp, entries = [a, b, c]) # Make some polynomial vectors
u = PolynomialVector(lp = lp, entries = [d, e, f])

dot_product = v * u  # We can compute the dot product, which should match the sum above

coef_rep_of_dot_prod, n_dot, w_dot = dot_product.get_coef_rep()
assert n_sum == n_dot
assert w_sum == w_dot
assert list(coef_rep_of_dot_prod.keys()) == list(coef_rep_of_sum.keys())
for next_monomial in coef_rep_of_dot_prod:
    assert (coef_rep_of_dot_prod[next_monomial] - coef_rep_of_sum[next_monomial]) % lp.modulus == 0

scaled_v = v ** g  # We can also scale a vector by a polynomial with __pow__
scaled_u = u ** h
lin_combo = scaled_v + scaled_u  # We can add vectors (and subtract!)
also_lin_combo = sum([i ** j for i, j in zip([v, u], [g, h])])  # more pythonically
assert also_lin_combo == lin_combo

# Lastly, let&#39;s print the coefficient representation, norm, and weight of this lin combo
coef_rep, n, w = lin_combo.get_coef_rep()
print(f&quot;Coefficient representation of linear combination = {coef_rep}&quot;)
print(f&quot;Norm of linear combination = {n}&quot;)
print(f&quot;Weight of linear combination = {w}&quot;)
</code></pre></div>
<h2 id="randomness-and-hashing">Randomness and Hashing<a class="headerlink" href="#randomness-and-hashing" title="Permanent link">&para;</a></h2>
<p>The library also contains functions <code>random_polynomial</code>, <code>hash2bddpoly</code>, <code>random_polynomialvector</code>, and <code>hash2bddpolyvec</code> for generating random <code>Polynomial</code> and <code>PolynomialVector</code> objects, either with system randomness or by hashing a message. The output of these functions are uniformly random (at least up to a negligible difference) among the <code>Polynomial</code> and <code>PolynomialVector</code> objects with a specified infinity norm bound and Hamming weight. Randomness is generated using the <code>secrets</code> module.</p>
<h3 id="example-of-randomness-and-hashing">Example of Randomness and Hashing.<a class="headerlink" href="#example-of-randomness-and-hashing" title="Permanent link">&para;</a></h3>
<p>In the following code, we first use the salt <code>'SOME_SALT'</code> to hash the string <code>hello world</code> to an instance of the <code>Polynomial</code> class, say <code>x</code>, and an instance of the <code>PolynomialVector</code> class, say <code>v</code>. In both cases, the polynomials in the hash output should have at most <code>4</code> non-zero coefficients since <code>wt = 4</code>, and all of those should be in the list <code>[-1, 0, 1]</code> since <code>bd = 1</code>. Then, we sample a new random <code>Polynomial</code>, say <code>y</code>, and a new random <code>PolynomialVector</code>, say <code>u</code>, using <code>random_polynomial</code> and <code>random_polynomialvector</code>, respectively. Note that there are around <code>2 ** 12</code> possible outputs of <code>random_polynomial</code> and <code>hash2bddpoly</code> using these parameters, and around <code>2 ** 36</code> possible outputs of <code>random_polynomialvector</code> and <code>hash2bddpolyvec</code>. In particular, the chance that we obtain <code>x == y</code> and <code>v == u</code> under these conditions is around <code>2 ** -48</code>. While this is not cryptographically small, it is pretty durned small, so the following code should pass assertions.  </p>
<div class="highlight"><pre><span></span><code>from lattice_algebra import hash2bddpoly, hash2bddpolyvec, random_polynomial, random_polynomialvector

lp = LatticeParameters(pars={&#39;degree&#39;: 8, &#39;modulus&#39;: 257, &#39;length&#39;: 3})  # make V

x = hash2bddpoly(secpar = lp.secpar, lp = lp, bd = 1, wt = 4, salt = &#39;SOME_SALT&#39;, m=&#39;hello world&#39;)
coef_rep, n, w = x.get_coef_rep()
assert n &lt;= 1  # should always pass
assert len(coef_rep) &lt;= w &lt;= 4  # should always pass

v = hash2bddpoly(secpar = lp.secpar, lp = lp, bd = 1, wt = 4, salt = &#39;SOME_SALT&#39;, m=&#39;hello world&#39;)
coef_rep, n, w = v.get_coef_rep()
assert n &lt;= 1  # should always pass
assert len(coef_rep) &lt;= w &lt;= 4  # should always pass

y = random_polynomial(secpar = lp.secpar, lp = lp, bd = 1, wt = 4)
coef_rep, n, w = y.get_coef_rep()
assert n &lt;= 1  # should always pass
assert len(coef_rep) &lt;= w &lt;= 4  # should always pass

u = random_polynomialvector(secpar = lp.secpar, lp = lp, bd = 1, wt = 4)
coef_rep, n, w = u.get_coef_rep()
assert n &lt;= 1  # should always pass
sassert len(coef_rep) &lt;= w &lt;= 4  # should always pass

assert x != y or v != u  # should pass with probability 1 - 2 ** - 48
</code></pre></div>
<p>In order for the hash functions to work requires decoding bitstrings of certain lengths to <code>Polynomial</code> and <code>PolynomialVector</code> objects in a way that keeps the output uniformly random (or at least with a negligible difference from uniform). These are the functions <code>decode2coeef</code>, <code>decode2coefs</code>, <code>decode2indices</code>, and <code>decode2polycoefs</code>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../installation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Installation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Installation
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["search.suggest", "search.highlight", "content.tabs.link"], "search": "../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.748e2769.min.js"></script>
      
    
  </body>
</html>